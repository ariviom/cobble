@import 'tailwindcss';
@import './fonts.css';

@theme {
  --color-neutral-00: oklch(100% 0 0);
  --color-neutral-50: oklch(98.5% 0 0);
  --color-neutral-100: oklch(96% 0 0);
  --color-neutral-200: oklch(92.2% 0 0);
  --color-neutral-300: oklch(87% 0 0);
  --color-neutral-400: oklch(70.8% 0 0);
  --color-neutral-500: oklch(55.6% 0 0);
  --color-neutral-600: oklch(43.9% 0 0);
  --color-neutral-700: oklch(37.1% 0 0);
  --color-neutral-800: oklch(26.9% 0 0);
  --color-neutral-900: oklch(20.5% 0 0);
  --color-neutral-950: oklch(14.5% 0 0);
  /* Page vs card surfaces */
  --color-background: var(--color-neutral-100); /* page background */
  --color-card: var(--color-neutral-00); /* card surface */
  --color-background-muted: var(--color-neutral-200);
  --color-card-muted: var(--color-neutral-50);

  /* Borders */
  --color-subtle: var(--color-neutral-200);
  --color-strong: var(--color-neutral-300);

  /* Text */
  --color-foreground: var(--color-neutral-900);
  --color-foreground-accent: var(--color-neutral-300);
  --color-foreground-muted: var(--color-neutral-700);

  /* Brand colors - aligned with LEGO 2024 palette */
  --color-brand-yellow: #f2d300;
  --color-brand-red: #e3000b;
  --color-brand-blue: #016cb8;
  --color-brand-green: #00b242;
  --color-brand-orange: #fe7000;
  --color-brand-purple: #4d2f93;
  --color-theme-primary: var(--color-brand-blue);
  --color-theme-accent: color-mix(
    in oklch,
    var(--color-theme-primary) 90%,
    white
  );

  /* Status / semantic colors */
  --color-danger: var(--color-brand-red);
  --color-danger-muted: color-mix(in oklch, var(--color-brand-red) 12%, white);
  --color-success: var(--color-brand-green);
  --color-success-muted: color-mix(
    in oklch,
    var(--color-brand-green) 12%,
    white
  );
  --color-warning: var(--color-brand-orange);
  --color-warning-muted: color-mix(
    in oklch,
    var(--color-brand-orange) 12%,
    white
  );
  --color-info: var(--color-brand-blue);
  --color-info-muted: color-mix(in oklch, var(--color-brand-blue) 10%, white);

  /* Radius scale - CHUNKY like LEGO bricks */
  --radius-sm: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1rem;
  --radius-xl: 1.5rem;
  --radius-full: 9999px;

  /* Shadow scale - BOLD and tactile */
  --shadow-sm: 0 2px 0 rgba(0, 0, 0, 0.1);
  --shadow-md: 0 3px 0 rgba(0, 0, 0, 0.12), 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 4px 0 rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 6px 0 rgba(0, 0, 0, 0.18), 0 4px 16px rgba(0, 0, 0, 0.12);

  /* Brick depth - the "3D pressed" effect */
  --brick-depth: 0 4px 0;
  --brick-depth-sm: 0 3px 0;
  --brick-depth-pressed: 0 1px 0;

  /* Accessible text colors for brand backgrounds */
  --color-on-white: #1a1a1a;
  --color-on-yellow: #1a1600;
  --color-on-red: #ffffff;
  --color-on-blue: #ffffff;
  --color-on-green: #ffffff;

  /* Theme text colors - readable versions of theme primary for text on backgrounds */
  --color-theme-text: var(--color-theme-primary);
  --color-theme-primary-contrast: white;

  /* Theme shadow - darker version of theme color for 3D depth effect */
  --color-theme-shadow: color-mix(
    in oklch,
    var(--color-theme-primary) 70%,
    black
  );

  /* Shadow depth - the "3D pressed" effect under buttons */
  --color-shadow-depth: var(--color-neutral-300);

  /* Container widths */
  --container-narrow: 32rem;
  --container-default: 64rem;
  --container-wide: 80rem;

  --font-sans: var(--font-cera-pro);
  --spacing-nav-height: 4rem;
  --spacing-topnav-height: 6rem;
  --spacing-tab-bar-height: 2.5rem;
  --spacing-controls-height: 3.5rem;
  /* Tab bar offset - 0 by default, set via data attribute when tabs present */
  --spacing-tab-bar-offset: 0rem;
  --spacing-filter-offset: calc(
    var(--spacing-nav-height) + var(--spacing-topnav-height) +
      var(--spacing-tab-bar-offset)
  );
  --spacing-inventory-offset: calc(
    var(--spacing-topnav-height) + var(--spacing-controls-height) +
      var(--spacing-tab-bar-offset)
  );
  --spacing-sticky-label: calc(
    var(--spacing-topnav-height) + var(--spacing-controls-height) +
      var(--spacing-tab-bar-offset)
  );
  --spacing-pinned-panel-height: calc(
    100dvh - var(--spacing-topnav-height) - var(--spacing-controls-height) -
      var(--spacing-nav-height) - var(--spacing-tab-bar-offset)
  );
  --breakpoint-xs: 23.5rem;
  --breakpoint-3xl: 120rem;
}

/* When tabs are present, add tab bar height to offset calculations */
[data-has-tabs='true'] {
  --spacing-tab-bar-offset: var(--spacing-tab-bar-height);
}

/* Theme color utilities */
.bg-theme-primary {
  background-color: var(--color-theme-primary);
}

.bg-theme-primary\/10 {
  background-color: color-mix(
    in oklch,
    var(--color-theme-primary) 10%,
    transparent
  );
}

.bg-theme-primary\/20 {
  background-color: color-mix(
    in oklch,
    var(--color-theme-primary) 20%,
    transparent
  );
}

.text-theme-primary-contrast {
  color: var(--color-theme-primary-contrast);
}

.text-theme-text {
  color: var(--color-theme-text);
}

.accent-theme-primary {
  accent-color: var(--color-theme-primary);
}

.border-theme-primary {
  border-color: var(--color-theme-primary);
}

.border-theme-primary\/30 {
  border-color: color-mix(
    in oklch,
    var(--color-theme-primary) 30%,
    transparent
  );
}

.ring-theme-primary {
  --tw-ring-color: var(--color-theme-primary);
}

/* Semantic color utilities - these stay fixed regardless of theme */
.text-danger {
  color: var(--color-danger);
}
.bg-danger {
  background-color: var(--color-danger);
}
.border-danger {
  border-color: var(--color-danger);
}
.ring-danger {
  --tw-ring-color: var(--color-danger);
}

.text-success {
  color: var(--color-success);
}
.bg-success {
  background-color: var(--color-success);
}
.border-success {
  border-color: var(--color-success);
}
.ring-success {
  --tw-ring-color: var(--color-success);
}

.text-warning {
  color: var(--color-warning);
}
.bg-warning {
  background-color: var(--color-warning);
}
.border-warning {
  border-color: var(--color-warning);
}

.text-info {
  color: var(--color-info);
}
.bg-info {
  background-color: var(--color-info);
}
.border-info {
  border-color: var(--color-info);
}

@media (min-width: 1024px) {
  :root {
    --spacing-topnav-height: 8rem;
    --spacing-sticky-label: calc(
      var(--spacing-topnav-height) + var(--spacing-controls-height) +
        var(--spacing-nav-height) + var(--spacing-tab-bar-offset)
    );
  }
}

.dark {
  --color-neutral-950: oklch(98.5% 0 0);
  --color-neutral-900: oklch(95% 0 0);
  --color-neutral-800: oklch(92.2% 0 0);
  --color-neutral-700: oklch(87% 0 0);
  --color-neutral-600: oklch(70.8% 0 0);
  --color-neutral-500: oklch(55.6% 0 0);
  --color-neutral-400: oklch(43.9% 0 0);
  --color-neutral-300: oklch(37.1% 0 0);
  --color-neutral-200: oklch(26.9% 0 0);
  --color-neutral-100: oklch(20.5% 0 0);
  --color-neutral-50: oklch(14.5% 0 0);
  --color-neutral-00: oklch(5% 0 0);
  /* In dark mode, keep the page background slightly darker than cards */
  --color-background: var(--color-neutral-50);
  --color-card: var(--color-neutral-100);
  --color-background-muted: var(--color-neutral-100);
  --color-card-muted: var(--color-neutral-200);

  --color-subtle: var(--color-neutral-200);
  --color-strong: var(--color-neutral-300);

  /* Dark mode shadow depth - use dark gray instead of light */
  --color-shadow-depth: oklch(15% 0 0);
}

@custom-variant dark (&:where(.dark, .dark *));

@custom-variant list {
  &:where([data-view='list'] *) {
    @slot;
  }
}

@custom-variant grid {
  &:where([data-view='grid'] *) {
    @slot;
  }
}

@custom-variant item-sm {
  &:where([data-item-size='sm'] *) {
    @slot;
  }
}

@custom-variant item-md {
  &:where([data-item-size='md'] *) {
    @slot;
  }
}

@custom-variant item-lg {
  &:where([data-item-size='lg'] *) {
    @slot;
  }
}

@custom-variant selected {
  &:where([data-selected='true'] *) {
    @slot;
  }
}

@custom-variant sidebar {
  &:where(.sidebar *) {
    @slot;
  }
}

@custom-variant expanded-topnav {
  &:where(.expanded-topnav *) {
    @slot;
  }
}

@custom-variant has-tabs {
  &:where([data-has-tabs='true'] *) {
    @slot;
  }
}

input.hide-arrows::-webkit-outer-spin-button,
input.hide-arrows::-webkit-inner-spin-button {
  /* display: none; <- Crashes Chrome on hover */
  -webkit-appearance: none;
  margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
}

input.hide-arrows[type='number'] {
  -moz-appearance: textfield; /* Firefox */
}

body {
  background: var(--color-background);
  color: var(--color-foreground);
  font-family: 'CeraPro', sans-serif;
}

/* Prevent OS-level prefers-color-scheme from painting dark before our theme runs.
   This ensures that even if the OS prefers dark, we won't flash a dark theme
   on first paint if the user's account preference is light. */
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: light;
  }
  body {
    background: var(--color-background);
    color: var(--color-foreground);
  }
}

.dark img[data-knockout='true'] {
  filter: url('#knockout-white');
}

/* Utility: hide scrollbars (Chrome/Safari/Opera, Firefox, IE/Edge) */
@utility no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

@utility set-grid-layout {
  display: grid;
  grid-template-rows:
    var(--set-grid-top-row, var(--spacing-topnav-height))
    minmax(0, 1fr);
}

@utility set-grid-animated {
  transition: grid-template-rows 200ms ease-out;
}

@utility set-grid-top-collapsed {
  --set-grid-top-row: var(--spacing-topnav-height);
}

/* Add tab bar height when tabs are present */
[data-has-tabs='true'].set-grid-top-collapsed {
  --set-grid-top-row: calc(
    var(--spacing-topnav-height) + var(--spacing-tab-bar-height)
  );
}

@utility set-grid-top-expanded {
  --set-grid-top-row: 12rem;
}

[data-has-tabs='true'].set-grid-top-expanded {
  --set-grid-top-row: calc(12rem + var(--spacing-tab-bar-height));
}

/* Typography utilities - BOLD and playful */
@utility text-page-title {
  font-size: 2.5rem;
  line-height: 1.1;
  font-weight: 800;
  letter-spacing: -0.03em;
}

@utility text-section-title {
  font-size: 1.75rem;
  line-height: 1.2;
  font-weight: 700;
  letter-spacing: -0.02em;
}

@utility text-card-title {
  font-size: 1.125rem;
  line-height: 1.3;
  font-weight: 600;
}

@utility text-body {
  font-size: 1rem;
  line-height: 1.6;
}

@utility text-caption {
  font-size: 0.875rem;
  line-height: 1.5;
  color: var(--color-foreground-muted);
}

/* LEGO brick-like effects */
@utility brick-shadow {
  box-shadow: var(--brick-depth) var(--color-neutral-900);
}

@utility brick-shadow-yellow {
  box-shadow: var(--brick-depth)
    color-mix(in oklch, var(--color-brand-yellow) 70%, black);
}

@utility brick-shadow-red {
  box-shadow: var(--brick-depth)
    color-mix(in oklch, var(--color-brand-red) 70%, black);
}

@utility brick-shadow-blue {
  box-shadow: var(--brick-depth)
    color-mix(in oklch, var(--color-brand-blue) 70%, black);
}

@utility brick-shadow-green {
  box-shadow: var(--brick-depth)
    color-mix(in oklch, var(--color-brand-green) 70%, black);
}

/* Color strip decorations */
@utility color-strip-top {
  position: relative;
}
.color-strip-top::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--strip-color, var(--color-brand-yellow));
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

/* Container utilities */
@utility container-narrow {
  max-width: var(--container-narrow);
  margin-inline: auto;
  padding-inline: 1rem;
}

@utility container-default {
  max-width: var(--container-default);
  margin-inline: auto;
  padding-inline: 1rem;
}

@utility container-wide {
  max-width: var(--container-wide);
  margin-inline: auto;
  padding-inline: 1rem;
}

/* Top positioning utilities for fixed/sticky elements */
@utility top-topnav-height {
  top: var(--spacing-topnav-height);
}

@utility h-tab-bar-height {
  height: var(--spacing-tab-bar-height);
}
